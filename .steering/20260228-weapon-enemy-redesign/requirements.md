# requirements.md — 武器リデザイン＋敵攻撃パターン追加

## 概要

現行の武器システム（6種）を免疫モチーフの8種武器に置き換え、
敵に遠距離攻撃パターンを追加する。

---

## 世界観

- **舞台**: 体内（SF・ナノテク拡張あり）
- **プレイヤー**: 免疫システムの戦闘細胞
- **敵**: 菌・ウイルス等の病原体（ただし敵の名前・見た目は抽象的でOK）
- **ビジュアルトーン**: ポップ寄り（明るい色・丸み・わかりやすさ重視）

---

## 1. 武器リデザイン

### 1.1 設計原則

- 全武器が**攻撃特化**（バフ・弱体化・条件発動なし）
- 全武器が**L1〜L5のレベル成長型**
- 成長は**機能強化・拡張のみ**（数が増える・範囲が広がる・多段化・分裂・同時発射数増加）
- バランスは「**威力 × 範囲 × インターバル**」で調整
- 高威力＝長クール / 高回転＝低威力 / 広範囲＝単発弱め / 単体特化＝ボス向き

### 1.2 武器一覧（8種）

| # | 武器名 | 免疫モチーフ | 攻撃タイプ | 役割 |
|---|-------|-----------|----------|------|
| 1 | マクロファージ・ブレード | マクロファージ | 近接円範囲 | 近接殲滅 |
| 2 | ニュートロ・チャージ | 好中球 | 突進爆発 | 中距離爆発 |
| 3 | キラーTレーザー | キラーT細胞 | 貫通直線 | ライン殲滅 |
| 4 | 抗体スプリッター | B細胞 | 分裂弾 | 拡散制圧 |
| 5 | ナノ・ホーミング球 | 抗体/補体系 | 追尾 | 確実単体 |
| 6 | サイトカイン・リング | サイトカイン | バリア型DoT+スロー | 近接防衛 |
| 7 | ファゴサイト・バースト | 炎症顆粒 | 近距離散弾 | 前方制圧 |
| 8 | インフラマ・スパイク | 炎症反応 | 設置型DoT | エリア支配 |

### 1.3 現行武器との対応

| 現行 | → | 新武器 | 変更内容 |
|------|---|-------|---------|
| Straight Shot | → | キラーTレーザー | 貫通直線にリワーク |
| Area Blast | → | マクロファージ・ブレード | 近接円範囲にリワーク |
| Homing Missile | → | ナノ・ホーミング球 | リネーム＋調整 |
| Orbital | → | サイトカイン・リング | バリア型DoT+スローにリワーク |
| Lightning (Chain) | → | **削除** | 抗体スプリッターが代替 |
| Laser Beam (Penetrating) | → | **削除** | キラーTレーザーに統合 |
| — | → | ニュートロ・チャージ | **新規** |
| — | → | 抗体スプリッター | **新規** |
| — | → | ファゴサイト・バースト | **新規** |
| — | → | インフラマ・スパイク | **新規** |

### 1.4 受け入れ条件（武器）

- [ ] 8種の武器が全て実装され、L1〜L5の成長が動作する
- [ ] 各武器に固有のパーティクルエフェクトがある
- [ ] 武器ごとの役割分担が明確で、ビルドの多様性がある
- [ ] バフ・弱体化・条件発動型の武器が存在しない

---

## 2. 敵攻撃パターン追加

### 2.1 設計原則

- 接触ダメージ型（近接）を3種
- 遠距離攻撃型を3種（新規追加）
- ボスの攻撃パターンも見直し（遠距離攻撃の統一設計）
- 敵名は抽象的でOK（機能・攻撃パターン重視）

### 2.2 敵タイプ一覧

#### 接触ダメージ型（3種）

| # | 敵名（仮） | 行動パターン | 特徴 |
|---|-----------|-----------|------|
| 1 | Charger | 一定距離で突進 | 高速接触・クールダウンあり |
| 2 | Swarm | 群れで接近 | 低HP・大量スポーン |
| 3 | Tank | ゆっくり接近 | 高HP・高接触ダメージ |

#### 遠距離攻撃型（3種）

| # | 敵名（仮） | 攻撃パターン | 特徴 |
|---|-----------|-----------|------|
| 4 | Shooter | 一定距離を保ち単発弾 | 基本的な遠距離攻撃 |
| 5 | Bomber | 着弾地点に範囲爆発 | 範囲攻撃・予告あり |
| 6 | Sniper | 遠距離から高精度弾 | 高威力・予告線あり |

### 2.3 受け入れ条件（敵）

- [ ] 接触型3種・遠距離型3種が実装されている
- [ ] 遠距離型は弾丸/攻撃にパーティクルエフェクトがある
- [ ] 各敵タイプの攻撃パターンが視覚的に区別できる
- [ ] 敵弾はプレイヤー弾と色・形で明確に区別できる（ポップなビジュアル）

---

## 3. パーティクル・ビジュアル要件

### 3.1 共通方針

- **武器トーン**: メカニック・ナノテク（金属質・発光・回路パターン・SF的な硬質感）
- **敵トーン**: グロテスク→ポップ変換（菌・ウイルスの不気味さを丸み・明るい色でデフォルメ）
- **背景**: 体内イメージ（暗めの背景に映える明るいエフェクト）
- **識別性**: プレイヤー弾＝暖色〜青系（メカニック発光） / 敵弾＝赤〜紫系（有機的）で区別
- **パフォーマンス**: CPUParticles2D使用（モバイル対応）

### 3.2 受け入れ条件（パーティクル）

- [ ] 全武器に発射時・着弾時のパーティクルがある
- [ ] 敵の遠距離攻撃に予告・発射・着弾のパーティクルがある
- [ ] 30FPS以上をモバイル端末で維持できる
- [ ] ポップで明るいビジュアルトーンで統一されている

---

## 4. スコープ外（今回は対応しない）

- 武器の最大所持数・同時装備数の変更
- 進化合成システム
- ボス専用ギミック（既存ボスの攻撃パターンは維持）
- セーブ/ロード対応
- モバイルタッチ入力

---

## 5. 制約事項

- 現行のWeapon Resourceベースのデータ駆動設計を維持
- PoolManagerによるオブジェクトプーリングを活用
- 既存のAutoload構成（GameManager, LevelSystem等）を変更しない
- アップグレードシステム（3択レベルアップ）との互換性を維持
